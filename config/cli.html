<!--
 * Asterisk-GUI	-	an Asterisk configuration interface
 *
 * Asterisk CLI emulator 
 *
 * Copyright (C) 2006-2007, Digium, Inc.
 *
 * Pari Nannapaneni <pari@digium.com>
 *
 * See http://www.asterisk.org for more information about
 * the Asterisk project. Please do not directly contact
 * any of the maintainers of this project for assistance;
 * the project provides a web site, mailing lists and IRC
 * channels for your use.
 *
 * This program is free software, distributed under the terms of
 * the GNU General Public License Version 2. See the LICENSE file
 * at the top of the source tree.
 *
-->
<script src="scripts/prototype.js"></script>
<script src="scripts/rico.js"></script>
<script src="scripts/astman.js"></script>
<link href="stylesheets/rico.css" media="all" rel="Stylesheet" type="text/css" />
<link href="stylesheets/schwing.css" media="all" rel="Stylesheet" type="text/css" />
<script>
function localajaxinit() {
	top._$('mainscreen').width= 798;
	setWindowTitle("Asterisk CLI Emulator");
	parent.loadscreen(this);
	_$('cli_cmd').value = "core show version";
	setTimeout( function(){_$('cli_cmd').focus();},500);
}

function resetmainscreen(){
	top._$('mainscreen').width= 540;
}

function executeCommand(cmd){
	parent.astmanEngine.cliCommand(cmd, gotResponse);
}

function gotResponse(op){

	op = op.replace(/Response: Follows/, "");
	op = op.replace(/Privilege: Command/, "");
	op = op.replace(/--END COMMAND--/, "");
	op = "Command><B> <Font color=#13138a size=+1>" + _$('cli_cmd').value + "</FONT></B>" + op ;
	_$('cli_output').innerHTML = "<PRE>"+ op + "</PRE>";
	_$('cli_cmd').value = "";
	_$('cli_cmd').focus();
}

function sendCommand(e){
	if(e.keyCode == 13){
		executeCommand( _$('cli_cmd').value );
		return false;
	}
}

</script>
<body id="foo" onload="localajaxinit()"  bgcolor="#FFFFFF" onunload="resetmainscreen();">
<div style="font-size : 12px; padding : 4px 6px 4px 6px; border-style : solid none solid none; border-top-color : #BDC7E7; border-bottom-color : #182052; border-width : 1px 0px 1px 0px; background-color : #ef8700; color : #ffffff;">
	<span style="margin-left: 4px;font-weight:bold;">Asterisk Command Line Interface</span>
	<span style="cursor: pointer; cursor: hand;" onclick="window.location.href=window.location.href;" >&nbsp;<img src="images/refresh.png" title=" Refresh " border=0 >&nbsp;</span>
	&nbsp;&nbsp;
</div>
<div style="padding : 0px 0px 0px 0px;">
<div style="padding : 0px 1px 0px 2px; height:444px;width= 797px; overflow :auto; font-size : 12px;" id="cli_output"></div><BR>
Asterisk CLI>&nbsp;<input id="cli_cmd" size=95 onKeyPress="sendCommand(event)" class="input9">
</div>
</body>

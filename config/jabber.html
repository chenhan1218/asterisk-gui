<!--
 * Asterisk -- An open source telephony toolkit.
 *
 * Configuration for "Users" generally
 *
 * Copyright (C) 1999 - 2006, Digium, Inc.
 *
 * Mark Spencer <markster@digium.com>
 *
 * See http://www.asterisk.org for more information about
 * the Asterisk project. Please do not directly contact
 * any of the maintainers of this project for assistance;
 * the project provides a web site, mailing lists and IRC
 * channels for your use.
 *
 * This program is free software, distributed under the terms of
 * the GNU General Public License Version 2. See the LICENSE file
 * at the top of the source tree.
 *
-->

<script src="scripts/prototype.js"></script>
<script src="scripts/rico.js"></script>
<script src="scripts/astman.js"></script>
<link href="stylesheets/rico.css" media="all" rel="Stylesheet" type="text/css" />
<link href="stylesheets/schwing.css" media="all" rel="Stylesheet" type="text/css" />

<script>
var phonecallbacks = new Object;
var widgets = new Array;
var fieldnames = new Array('status', 'save', 'cancel', 'new', 'delete','name', 'username','secret','type','serverhost','port','usetls','usesasl','buddy','statusmessage','timeout');

phonecallbacks.format = function(t) {
		tmp = t.name.split('general');
		if(tmp.length>1)
			return false;
		else
			return t.name;
}


phonecallbacks.postselect = function(box, val) {

}



phonecallbacks.loaded = function() {
		//$('hiddenfield').selectitem(0);

}


function localajaxinit() {
		// Load the jabber.conf->users into the Users, associate the field to other fields
		parent.loadscreen(this);
		for (var x =0; x < fieldnames; x++) {
			widgets[fieldnames[x]] = $(fieldnames[x]);
			widgets[fieldnames[x]].disabled = true;
		}
		parent.astmanEngine.config2list("jabber.conf", $('JabberUsers'), widgets, phonecallbacks);
		return;
	}
</script>
<body id="foo" onload="localajaxinit()">
<div class="mainscreenTitleBar">
	<span style="margin-left: 4px;font-weight:bold">Jabber&trade; Users Configuration</span>
</div>
<div class="mainscreenContentBox" id="userscontent">
<table class="mainscreenTable" align="center">
	<tr valign="top">
		<td colspan='2'>
		Users:
		</td>
	</tr>
	<tr valign="top">
		<td>
		<select size="28" id="JabberUsers" style="width:220px">
		<option>Loading...</option>
		</select>
		</td>
		<td colspan='3'>
		<div id='adjustments' style='width:350'>
		<table cellspacing='0' cellpadding='0'>
			<tr valign="top"><td>
				<table>
				<tr><td>Extension:</td><td>&nbsp;<input size='24' id='name'></td></tr>
				<tr><td>Username:</td><td>&nbsp;<input size='24' id='username'></td></tr>
				<tr><td>Password:</td><td>&nbsp;<input size='24' id='secret'></td></tr>
				<tr><td>Server Host:</td><td>&nbsp;<input size='24' id='serverhost'></td></tr>
				<tr><td>Buddy:</td><td>&nbsp;<input size='24' id='buddy'></td></tr>
				<tr><td>Status Message:</td><td>&nbsp;<input size='24' id='statusmessage'></td></tr>
				<tr><td>Type:</td><td>&nbsp;<select id='type'>
																			<option value="client">client</option>
																			<option value="component">component</option>
																		</select>
													</td>
				</tr>
				<tr><td>Port:</td><td>&nbsp;<input size='4' id='port' pattern='^\d*$'></td></tr>
				<tr><td>TimeOut:</td><td>&nbsp;<input size='4' id='timeout' pattern='^\d*$'></td></tr>
				<tr><td>Use TLS:</td><td><input type="checkbox" id='usetls'></td></tr>
				<tr><td>Use SASL:</td><td><input type="checkbox" id='usesasl'></td></tr>
				<tr><td colspan='2' align='center'><div style="height:15px" id='status'></div></td></tr>
				</table>
			</td>
			</tr>
			<tr><td align="center">
						<img src="./images/jabber.gif" border=0><BR>
						<font size=-1>
						Jabber&trade; is a collection of open, XML-based protocols for instant messaging and presence information.
						</font><BR><font size=-2>Jabber&reg; is a registered trademark of Jabber, Inc.</font>
					</td>
			</tr>
		</table>
		</div>
		</td></tr>				
		<tr>
		<td align='center'>
			<table>
			<tr align='center'><td>
			<input style='width:80' type='button' id='new' value='New'>
			</td><td>
			<input style='width:80' type='button' id='delete' value='Delete'>
			</td></tr>
			</table>
		</td>
		<td colspan='1' align='right'>
				<input style='width:80' type='button' id='save' value='Save'>
				&nbsp;
				<input style='width:80' type='button' id='cancel' value='Cancel'>
				&nbsp;
		</td>
	</tr><tr>
	</tr>
</table>
</div>
</body>
